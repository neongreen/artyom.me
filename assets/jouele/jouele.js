!function(e){"use strict";var t=!1,o=function(){var e=document.createElement("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"==(e.firstChild&&e.firstChild.namespaceURI)},l=function(){return("object"==typeof Modernizr&&"boolean"==typeof Modernizr.inlinesvg&&Modernizr.inlinesvg||o())&&(t=!0),this},n=function(e){if("number"!=typeof e)return e;var t=Math.round(e)%60,o=(Math.round(e)-t)%3600/60,l=(Math.round(e)-t-60*o)/3600;return(l?l+":":"")+(l&&o<10?"0"+o:o)+":"+(t<10?"0"+t:t)},i=function(e){if("number"==typeof e)return e;for(var t=e.split(":").reverse(),o=0,l=0;l<t.length;l++)o+=t[l]*Math.pow(60,l);return o},a=function(e,t){if(e.preloaderTimeout||e.isSeeking||!e.waitForLoad)return e;var t=t||50;return e.preloaderTimeout=setTimeout(function(){return e.isSeeking?(e.preloaderTimeout=null,e):void e.$container.find(".jouele-play-lift").addClass("jouele-play-lift_buffering")},t),e},s=function(e){return e.preloaderTimeout?(clearTimeout(e.preloaderTimeout),e.preloaderTimeout=null,e.$container.find(".jouele-play-lift").removeClass("jouele-play-lift_buffering"),e):e},u=function(e,t){if(e.fullyLoaded&&e.totalTime||!e.isPlayed)return e;var o=Math.round(t.seekPercent);return o>=100?(e.fullyLoaded=!0,e.totalTime=t.duration):o>0?e.totalTime=t.duration:e.totalTime=0,e.$container.find(".jouele-load-bar").css({width:Math.floor(Math.min(100,o))+"%"}),e},r=function(e,t){return e.seekTime&&!e.isSeeking?e:(t=t>100?100:t,e.$container.find(".jouele-play-lift").css("left",t+"%"),e.$container.find(".jouele-play-bar").css("width",t+"%"),e)},d=function(e,t){if(e.totalTime<=0&&!e.options.length)return e;var o="";return e.fullyLoaded&&e.totalTime?e.fullTimeDisplayed||(o=n(e.totalTime),e.$container.find(".jouele-total-time").html(o),e.fullTimeDisplayed=!0):e.options.length?(o=n(i(e.options.length)),e.$container.find(".jouele-total-time").html(o)):(o=e.options.length?e.options.length:'<span class="jouele-total-time__approx">~</span>'+n(e.totalTime),e.$container.find(".jouele-total-time").html(o)),(e.isPlaying||e.waitForLoad)&&(e.totalTime||e.seekTime)&&e.$container.find(".jouele-play-time").html(n(e.seekTime?e.seekTime:t)),e},p=function(t,o){var l=o.toFixed(2);return l<0?l=0:l>100&&(l=100),t.isPlaying||(e.Jouele.lastPlayed!==t&&(e.Jouele.lastPlayed=t,e.Jouele("setMedia",t)),t.pseudoPlay()),e.Jouele.$jPlayer.jPlayer("playHead",l),r(t,l),a(t),t.waitForLoad=!0,t.fullTimeDisplayed?(t.seekTime=t.totalTime/100*l,d(t,t.seekTime)):t.options.length?(t.seekTime=i(t.options.length)/100*l,d(t,t.seekTime)):t.seekTime=.01,t};e.fn.jouele=function(t){return this.each(function(){var o=e(this),l=o.attr("class"),n=l?l.indexOf("jouele-skin-"):-1,i=o.data("jouele"),a="";if(i){if("string"==typeof t&&"undefined"!=typeof i[t]&&e.isFunction(i[t]))return i[t]()}else n>0&&(a=l.substr(n+12,l.indexOf(" ",n)>0?l.indexOf(" ",n):l.length)),new c(o,e.extend({},e.fn.jouele.defaults,t,o.data(),{skin:a}))})},e.fn.jouele.defaults={length:0,playFrom:0,hideTimelineOnPause:!1,skin:"",spaceControl:!1,pauseOnSpace:!1,playOnSpace:!1,scrollOnSpace:!0};var c=function(e,t){var o=this.checkHref(e);return!!o&&(this.version="2.2.2",this.$link=e,this.href=o,this.options=t,this.isPlaying=!1,this.isPlayed=!1,this.totalTime=0,this.fullyLoaded=!1,this.fullTimeDisplayed=!1,this.waitForLoad=!1,this.seekTime=0,this.preloaderTimeout=null,this.isSeeking=!1,this.playFrom=0,void this.init())};c.prototype.checkHref=function(e){var t=e.attr("href");return!!t&&t},c.prototype.init=function(){this.checkOptions(),this.createDOM(),this.pushToPlaylist(),this.checkGlobalOptions(),e.Jouele.$jPlayer?e.Jouele("_jPlayerReady",this):e.Jouele("init",this),this.bindEvents(),this.insertDOM()},c.prototype.destroy=function(){var t=this,o=this.joueleID;return e.each(t.playlist,function(o,l){l===t&&(t.playlist.splice(o,1),e.Jouele.lastPlayed===t&&(e.Jouele.lastPlayed=null),0===t.playlist.length&&e.each(e.Jouele.playlist,function(o,l){l===t.playlist&&e.Jouele.playlist.splice(o,1)}))}),this.$container.after(this.$link).remove(),e(document).off("."+o),this.$link.removeData("jouele"),this.$link},c.prototype.pause=function(){return s(this),this.seekTime||(this.waitForLoad=!1),"undefined"!=typeof this.$jPlayer&&this.$jPlayer.jPlayer&&(this.isPlaying||this.waitForLoad)&&(this.isPlaying=!1,this.waitForLoad=!1,this.$jPlayer.jPlayer("pause")),this.isPlaying||this.pseudoPause(),this},c.prototype.pseudoPause=function(){this.$container.removeClass("jouele-status-playing"),this.$container.find(".jouele-control-button-icon_play").removeClass("jouele-hidden"),this.$container.find(".jouele-control-button-icon_pause").addClass("jouele-hidden")},c.prototype.stop=function(){return"undefined"!=typeof this.$jPlayer&&this.$jPlayer.jPlayer&&this.isPlaying&&this.$jPlayer.jPlayer("stop"),this},c.prototype.play=function(){var t=this;if(e.Jouele.lastPlayed!==t){if(t.playFrom)return a(t),p(t,t.totalTime?t.playFrom/(t.totalTime/100):0),t;e(document).trigger("jouele-pause",t),e.Jouele.lastPlayed=t,e.Jouele("setMedia",t)}return a(t,!t.seekTime&&500),t.isPlayed=!0,"undefined"!=typeof t.$jPlayer&&t.$jPlayer.jPlayer&&(t.isPlaying||setTimeout(function(){t.$jPlayer.jPlayer("play")},1)),t},c.prototype.pseudoPlay=function(){e(document).trigger("jouele-pause",this),this.$container.addClass("jouele-status-playing"),this.$container.find(".jouele-control-button-icon_pause").removeClass("jouele-hidden"),this.$container.find(".jouele-control-button-icon_play").addClass("jouele-hidden"),this.isPlayed=!0},c.prototype.onPause=function(){this.isPlaying=!1,this.isSeeking=!1,this.waitForLoad=!1,this.$container.removeClass("jouele-status-playing"),this.$container.find(".jouele-control-button-icon_play").removeClass("jouele-hidden"),this.$container.find(".jouele-control-button-icon_pause").addClass("jouele-hidden")},c.prototype.onStop=function(){this.isPlaying=!1,this.seekTime=0,this.isSeeking=!1,this.waitForLoad=!1,this.$container.removeClass("jouele-status-playing")},c.prototype.onPlay=function(){e(document).trigger("jouele-pause",this),this.$container.addClass("jouele-status-playing"),this.$container.find(".jouele-control-button-icon_pause").removeClass("jouele-hidden"),this.$container.find(".jouele-control-button-icon_play").addClass("jouele-hidden"),this.waitForLoad=!1,this.isPlaying=!0,this.isPlayed=!0,e.Jouele.lastPlayed=this},c.prototype.checkOptions=function(){return parseInt(this.options.length)||(this.options.length=0),this},c.prototype.checkGlobalOptions=function(){return(this.options.pauseOnSpace||this.$playlist.data("pauseOnSpace"))&&(e.Jouele.options.pauseOnSpace=!0),(this.options.playOnSpace||this.$playlist.data("playOnSpace"))&&(e.Jouele.options.playOnSpace=!0),this.options.scrollOnSpace&&!this.$playlist.data("scrollOnSpace")||(e.Jouele.options.scrollOnSpace=!1),(this.options.spaceControl||this.$playlist.data("spaceControl"))&&(e.Jouele.options.pauseOnSpace=!0,e.Jouele.options.playOnSpace=!0,e.Jouele.options.scrollOnSpace=!1),this},c.prototype.createDOM=function(){var o=e(document.createElement("div")),l=e(document.createElement("div")),a=e(document.createElement("div")),s=e(document.createElement("div")),u=this.$link.text(),r=this,d=function(){return[e(document.createElement("div")).addClass("jouele-time").append(e(document.createElement("div")).addClass("jouele-play-time").text(r.options.length?"0:00":""),e(document.createElement("div")).addClass("jouele-total-time").text(r.options.length?n(i(r.options.length)):"")),e(document.createElement("div")).addClass("jouele-control").append(e(document.createElement("div")).addClass("jouele-control-button"+(t?"":" jouele-control-button_nosvg")).append(e(document.createElement("span")).addClass("jouele-control-button-icon jouele-control-button-icon_unavailable").html(t?'<svg class="jouele-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" enable-background="new 0 0 16 16"><g class="jouele-svg-color"><path d="m4 6.7l3.8 3.7-3.8 2.1z"/><path d="m.2 2.2l.6-.5 11 11.1-.5.5z"/><path d="m4 4.3v-.8l8 4.5-2.7 1.5z"/></g></svg>':""),e(document.createElement("a")).attr("href",r.href).addClass("jouele-control-link jouele-hidden").append(e(document.createElement("span")).addClass("jouele-control-button-icon jouele-control-button-icon_play jouele-hidden").html(t?'<svg class="jouele-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 512 512" fill="#000000"><path class="jouele-svg-color" d="M 256.00,0.00C 114.615,0.00,0.00,114.615,0.00,256.00s 114.615,256.00, 256.00,256.00s 256.00-114.615, 256.00-256.00S 397.385,0.00, 256.00,0.00z M 256.00,464.00 c-114.875,0.00-208.00-93.125-208.00-208.00S 141.125,48.00, 256.00,48.00s 208.00,93.125, 208.00,208.00S 370.875,464.00, 256.00,464.00zM 192.00,144.00L 384.00,256.00L 192.00,368.00 z"/></svg>':""),e(document.createElement("span")).addClass("jouele-control-button-icon jouele-control-button-icon_pause jouele-hidden").html(t?'<svg class="jouele-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 512 512" fill="#000000"><path class="jouele-svg-color" d="M 256.00,0.00C 114.615,0.00,0.00,114.615,0.00,256.00s 114.615,256.00, 256.00,256.00s 256.00-114.615, 256.00-256.00S 397.385,0.00, 256.00,0.00z M 256.00,464.00 c-114.875,0.00-208.00-93.125-208.00-208.00S 141.125,48.00, 256.00,48.00s 208.00,93.125, 208.00,208.00S 370.875,464.00, 256.00,464.00zM 192.00,144.00L 384.00,256.00L 192.00,368.00 z"/></svg>':""))),e(document.createElement("div")).addClass("jouele-control-text").html(u))]},p=function(){return e(document.createElement("div")).addClass("jouele-mine").append(e(document.createElement("div")).addClass("jouele-mine-bar"),e(document.createElement("div")).addClass("jouele-load-bar jouele-hidden"),e(document.createElement("div")).addClass("jouele-play-bar"),e(document.createElement("div")).addClass("jouele-play-lift jouele-hidden").append())};return this.$container=o.data("jouele",this).addClass("jouele jouele_inited"+(this.$link.data("first")===!0?" jouele_first":"")+(this.options.hideTimelineOnPause?" jouele_timeline_hide":"")+(this.options.skin?" jouele-skin-"+this.options.skin:"")).append(l.addClass("jouele-invisible-object"),a.addClass("jouele-info-area").append(d()),s.addClass("jouele-progress-area").append(p())),this.joueleID="jouele-"+(1e3+Math.round(99999*Math.random())),this.$playlist=this.$link.parents(".jouele-playlist").eq(0),this},c.prototype.pushToPlaylist=function(){var t,o=this;if(e(".jouele").filter(":not(.jouele-playlist .jouele)").add(".jouele-playlist").each(function(e,l){return o.$playlist.length>0&&o.$playlist[0]===l?(t=e,!1):o.$link[0]===l?(t=e,!1):void 0}),o.$playlist.length>0){var l,n,i,a=o.$playlist.find(".jouele").filter("[href]"),s=o.$playlist.find(".jouele_inited");if(a.add(s).each(function(t,i){var a=e(i);if(a.hasClass("jouele_inited")&&(n=a.data("jouele")),i===o.$link[0])return l=t,!1}),e.isArray(e.Jouele.playlist[t]))if(e.Jouele.playlist[t][0].$playlist[0]!==o.$playlist[0])e.Jouele.playlist.splice(t,0,[o]);else{for(var u=0;u<e.Jouele.playlist[t].length;u++)if(e.Jouele.playlist[t][u]===n){i=u;break}"undefined"==typeof e.Jouele.playlist[t][i+1]?0===l?e.Jouele.playlist[t].splice(0,0,o):e.Jouele.playlist[t].push(o):e.Jouele.playlist[t].splice(i+1,0,o)}else e.Jouele.playlist[t]=[o]}else e.Jouele.playlist.splice(t,0,[o]);o.playlist=e.Jouele.playlist[t]},c.prototype.insertDOM=function(){return this.$link.after(this.$container),this.$link.data("jouele",this),this.$link.detach(),this},c.prototype.bindEvents=function(){var t=this,o=t.joueleID;return e(document).on("jouele-pause."+o,function(e,o){t!==o&&t.pause()}),this},e.Jouele=function(t,o){this.init=function(t){var o=this,l=e("<div>");e(document).on("keydown.jouele",function(t){if("INPUT"===t.target.nodeName||"TEXTAREA"===t.target.nodeName||"SELECT"===t.target.nodeName||"OPTION"===t.target.nodeName||"BUTTON"===t.target.nodeName||"undefined"!=typeof e(t.target).attr("contenteditable")&&"false"!==e(t.target).attr("contenteditable"))return!0;if(32===t.keyCode)if(e.Jouele.lastPlayed&&e.Jouele.lastPlayed.isPlaying)e.Jouele.options.pauseOnSpace&&(e.Jouele.options.scrollOnSpace||(t.stopPropagation(),t.preventDefault()),e.Jouele.lastPlayed.pause());else if(e.Jouele.options.playOnSpace)if(e.Jouele.options.scrollOnSpace||(t.stopPropagation(),t.preventDefault()),e.Jouele.lastPlayed)e.Jouele.lastPlayed.play();else{var o=e(".jouele_inited").filter(".jouele_first");o.length>0?o.eq(0).data("jouele").play():e.Jouele.playlist[0][0].play()}}),e.Jouele.$jPlayer=l.jPlayer({solution:"html",wmode:"window",preload:"none",supplied:"mp3",volume:1,ready:function(){o._jPlayerReady(t)}})},this.setMedia=function(t){var o=this;t.$jPlayer.off(e.jPlayer.event.pause).on(e.jPlayer.event.pause,function(){o._jPlayerPause(t)}),t.$jPlayer.off(e.jPlayer.event.stop).on(e.jPlayer.event.stop,function(){o._jPlayerStop(t)}),t.$jPlayer.off(e.jPlayer.event.play).on(e.jPlayer.event.play,function(){o._jPlayerPlay(t)}),t.$jPlayer.off(e.jPlayer.event.progress).on(e.jPlayer.event.progress,function(e){o._jPlayerProgress(t,e)}),t.$jPlayer.off(e.jPlayer.event.timeupdate).on(e.jPlayer.event.timeupdate,function(e){o._jPlayerTimeupdate(t,e)}),e.Jouele.$jPlayer.jPlayer("setMedia",{mp3:t.href})},this._jPlayerReady=function(t){var o=t.joueleID;t.$jPlayer=e.Jouele.$jPlayer,t.totalTime=i(t.options.length),t.playFrom=i(t.options.playFrom),t.$container.find(".jouele-hidden").removeClass("jouele-hidden"),t.$container.find(".jouele-control-button-icon_unavailable").addClass("jouele-hidden"),t.$container.find(".jouele-control-button-icon_pause").addClass("jouele-hidden"),t.$container.find(".jouele-control-link").off("click.jouele").on("click.jouele",function(e){e.preventDefault(),e.stopPropagation()}),t.$container.find(".jouele-control-button-icon_play").off("click.jouele").on("click.jouele",function(){t.waitForLoad=!0,t.pseudoPlay.call(t),t.play.call(t)}),t.$container.find(".jouele-control-button-icon_pause").off("click.jouele").on("click.jouele",function(){t.pseudoPause.call(t),t.pause.call(t)}),t.$container.find(".jouele-mine").off("mousedown."+o).on("mousedown."+o,function(l){if(1!==l.which)return!1;l.stopPropagation(),l.preventDefault(),t.isSeeking=!0;var n=e(this),i=(l.pageX-n.offset().left)/n.width()*100;e(document).off("mouseup."+o).one("mouseup."+o,function(){e(document).off("mousemove."+o),t.isSeeking=!1,a(t)}),e(document).off("mousemove."+o).on("mousemove."+o,function(e){if(e.stopPropagation(),e.preventDefault(),!t.isSeeking)return!1;var o=(e.pageX-n.offset().left)/n.width()*100;p(t,o)}),p(t,i)})},this._jPlayerPause=function(e){e.onPause.call(e)},this._jPlayerStop=function(e){e.onStop.call(e)},this._jPlayerPlay=function(e){e.onPlay.call(e)},this._jPlayerProgress=function(e,t){u(e,t.jPlayer.status),d(e,t.jPlayer.status.currentTime)},this._jPlayerTimeupdate=function(e,t){if(u(e,t.jPlayer.status),d(e,t.jPlayer.status.currentTime),r(e,t.jPlayer.status.currentPercentAbsolute.toFixed(2)),e.playFrom=t.jPlayer.status.currentTime,s(e),e.waitForLoad&&(e.waitForLoad=!1,e.seekTime=0,e.play(),s(e)),t.jPlayer.status.duration&&t.jPlayer.status.duration.toFixed(3)-t.jPlayer.status.currentTime.toFixed(3)<.01&&t.jPlayer.status.duration.toFixed(3)-t.jPlayer.status.currentTime.toFixed(3)>-1){if(e.pause(),e.playFrom=0,0===e.$playlist.length)return!1;for(var o=0;o<e.playlist.length&&e.playlist[o]!==e;o++);"undefined"!=typeof e.playlist[o+1]?e.playlist[o+1].play():e.$playlist.data("repeat")&&e.playlist[0].play()}},"string"==typeof t&&e.isFunction(this[t])&&this[t](o)},e.Jouele.playlist=[],e.Jouele.lastPlayed=null,e.Jouele.$jPlayer=null,e.Jouele.options={pauseOnSpace:!1,playOnSpace:!1,scrollOnSpace:!0},l();var y=function(){e("a.jouele[href]").jouele()};e(y)}(jQuery);
